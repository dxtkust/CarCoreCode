# STM32F103 小车循迹与遥控项目

## 项目简介
本项目基于 STM32F103C8T6 单片机，实现了小车的遥控（前进、后退、左转、右转、停止）和循迹（黑线跟随）两种模式。通过串口接收指令切换模式和控制小车动作。

## 主要功能
- 串口遥控：通过串口发送指令（F/B/L/R/S/M）控制小车运动或切换模式。
- 循迹模式：小车根据传感器检测黑线自动调整方向。
- PWM 调速：通过定时器 PWM 控制电机速度。

## 硬件连接
- 电机驱动引脚：
  - GPIOB 12/13/14/15 控制电机正反转
  - TIM4 CH3/CH4 输出 PWM 控制速度
- 循迹传感器：
  - GPIOA 4/5、GPIOB 1 分别为左/中/右传感器输入
- 串口：
  - USART2 用于接收上位机指令

## 指令说明
| 指令 | 说明         |
|------|--------------|
| F    | 前进         |
| B    | 后退         |
| L    | 左转         |
| R    | 右转         |
| S    | 停止         |
| M    | 模式切换     |

- 遥控模式下（mode=0）响应 F/B/L/R/S 指令
- 发送 M 可在遥控/循迹模式间切换

## 主要文件说明
- `Core/Src/main.c`：主程序，包含所有控制逻辑
- `Core/Inc/main.h`：主头文件
- `Core/Inc/gpio.h`、`tim.h`、`usart.h`：外设初始化相关头文件

## 编译与下载
1. 使用 STM32CubeMX 生成工程，配置好 GPIO、TIM4（PWM）、USART2。
2. 用 Keil、IAR 或 STM32CubeIDE 打开工程，编译并下载到开发板。
3. 上电后通过串口助手发送指令即可控制小车。

## 注意事项
- 请根据实际硬件调整 PWM 占空比和引脚定义。
- 传感器电平与代码逻辑需一致（检测到黑线为低电平）。
- 若电机不转，请检查 PWM 初始化和电机驱动电路。

## 联系方式
如有问题可联系作者。
